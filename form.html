<!DOCTYPE html>
<html lang="en">
    <style>
    #headerBar{
        background : #E55653;
        background : rgba(229, 86, 83, 1);
        width : 100%;
        height : 80px;
    }
    #hamburger {
        background : url(images/hamberger.png) no-repeat;
        height: 36px;
        width: 27px;
        margin: 27px 0 0 20px;
        float: left;
        cursor: pointer;
    }
    #profilename {
        font-family : TheMix;
        font-size : 25px;
        color : #FADDDD;
        color : rgb(250, 221, 221);
        float: right;
        line-height: 80px;
    }
    #profilemasking{
        /*background : #EA6D65;
        background : rgba(234, 109, 101, 1);*/
        width : 80px;
        height : 80px;
    }
    #profilecircle{
        background-image : url(images/circle.png);
        background-repeat : no-repeat;
        background-size: contain;
        width: 65px;
        height: 65px;
        -moz-border-radius: 33px;
        -webkit-border-radius: 33px;       
        border-radius: 33px;
        float: right;
        margin: 8px 20px 0 20px;
    }

    </style>
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
		<meta name="viewport" content="width=device-width, initial-scale=1.0"> 
		<title>Natural Language Form</title>
		<meta name="description" content="Natural Language Form with custom text input and drop-down lists" />
		<meta name="keywords" content="Natural Language UI, sentence form, text input, contenteditable, html5, css3, jquery" />
		<link rel="shortcut icon" href="../favicon.ico"> 
		<link rel="stylesheet" type="text/css" href="css/default.css" />
		<link rel="stylesheet" type="text/css" href="css/component.css" />
		<link rel="stylesheet" type="text/css" href="css3/elastislide.css" />
		<link rel="stylesheet" type="text/css" href="css/custom.css" />
		<link rel="stylesheet" type="text/css" href="css/image-picker.css" />
		
        <script src="js/modernizr.custom.17475.js"></script>
		<script src="js/jquery.min.js"></script>
		<script src="js/jquery.elastislide.js"></script>
		<script src="js/jquerypp.custom.js"></script>
        
        <script src="js/image-picker.js"></script>
        <script src="../Tangle/Tangle.js"></script>
        <script src="../Tangle/TangleKit/sprintf.js"></script>
        <script src="../Tangle/TangleKit/TangleKit.js"></script>
        <script src="../Tangle/TangleKit/mootools.js"></script>
	</head>
    <script>
    $(document).ready(function(){
        
        $('#profilename').text(parseCookieValue('name'));
        $(".username").text(parseCookieValue('name')); 
        imageUrl = parseCookieValue('image')
        $($('#profilecircle')[0]).attr('style', 'background-image: url(' + imageUrl + ')')
    });
        parseCookieValue = function(param){
            cookieSet = document.cookie.split(';')
            for (cook in cookieSet) { 
                value = cookieSet[cook]; 
                name = value.substring(0,value.indexOf('=')); 
                if (name.trim() === param) {
                    return value.substring(value.indexOf('=') + 1)
                } 
            }
            return undefined
        }
    </script>
	<body class="nl-blurred">
        <div id='headerBar'>
            <div id='hamburger'></div>
            <!--div id='profilemasking'></div-->
            <div id='profilecircle'></div>
            <div id='profilename'>paul graham</div>
        </div>
		<div class="container demo-1">
			<!-- Top Navigation -->
			
			<!--header>
					
			</header-->
			<div class="main clearfix">
				<form id="nl-form" class="nl-form">
                    <div class="welcomeText">
                        Hi <span class="username"></span>, Welcome to show up hotel. <br>Please tell us your travel details and any other specific requirements.
                    </div>    
                    <br />
                    <div class="formElements">
    					I am traveling to 
    					<select>
    						<option selected disabled>Location</option>
                            <option value="1">London</option>
    						<option value="2">Kailua</option>
    						<option value="3">Istanbul</option>
       				    </select>,
                        <br>
                        from
                        <input type=date style="display: inline;"> to
                        <input type=date style="display: inline;">
                        <br />
                        My purpose of travelling is  
                        <select>
    						<option value="1">Honeymoon</option>
    						<option value="2">Family</option>
    						<option value="3">Business</option>
       				    </select>.
    					<br />
                        <br />
                        <div id='text'>
                        What Kind of food do both of you enjoy <span data-var=currentSelectedItems></span>
                        </div>
                        <select multiple="multiple" class="image-picker show-html">
                            <option data-img-src="http://placekitten.com/220/200" value="1">Thai</option>
                            <option data-img-src="http://placekitten.com/180/200" value="2" style="padding-left: 10px;">French</option>
                            <option data-img-src="http://placekitten.com/130/200" value="3" style="padding-left: 10px;">Italian</option>
                            <option data-img-src="http://placekitten.com/180/200" value="4" style="padding-left: 10px;">Spanish</option>
                            <option data-img-src="http://placekitten.com/130/200" value="5" style="padding-left: 10px;">Greek</option>
                            <option data-img-src="http://placekitten.com/220/200" value="6">Thai</option>
                            <option data-img-src="http://placekitten.com/180/200" value="7" style="padding-left: 10px;">French</option>
                            <option data-img-src="http://placekitten.com/130/200" value="8" style="padding-left: 10px;">Italian</option>
                            <option data-img-src="http://placekitten.com/180/200" value="9" style="padding-left: 10px;">Spanish</option>
                            <option data-img-src="http://placekitten.com/130/200" value="10" style="padding-left: 10px;">Greek</option>
                        </select>
                    
                        <div class="nl-submit-wrap">
    						<button class="nl-submit" type="submit">Take me there!</button>
    					</div>
    					<div class="nl-overlay"></div>
                    </div>   
    			</form>
			</div>
		</div><!-- /container -->
		<script src="js/nlform.js"></script>

		<script>
        $(".formElements").click( function(){
            $(".welcomeText").slideUp();
        });

			var nlform = new NLForm( document.getElementById( 'nl-form' ) );
            tangle = new Tangle (document.getElementById("text"), {
                initialize: function () {
                    this.currentSelectedItems = ''
                },
                update: function(){}
            });
        $("select").imagepicker({
            clicked: function(options){
                console.log("I am clicked.")
                var selectedItems = ''
                for (var i = 0; i < this.children().length; i++){
                    var isSelected = this.children()[i].selected
                    if (isSelected)
                        selectedItems += this.children()[i].text + ', '
                }
                tangle.setValue('currentSelectedItems', selectedItems)
            },
            selected: function(options){},
            show_label: true
        })
        $('#text').on('click', function(){
            console.log('text clicked') 
            var node = $($('.image_picker_selector')[2])
            var style = node.attr('style')
            if (style === undefined || style.indexOf('display: none') === -1){
                node.attr('style', 'display: none')
                $('.elastislide-wrapper').attr('style', 'display: none')
            }
            else {
                node.attr('style', 'display: inline')
                $('.elastislide-wrapper').attr('style', 'display: block')
                $('#carousel').find('li').attr('style', 'padding-left: 10px')
            }
        })
        $(document).ready(function(){
            console.log('dom is loaded and carousel is called.')
            $('#carousel').elastislide({}, function() {   
                $('#carousel').find('li').attr('style', 'padding-left: 10px')
            })
        })
		</script>
	</body>
</html>